<!doctype html>
<html lang="en">
<head>
<title>Finite Automata Design</title>
<!-- 2020-08-04 Tue 14:34 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">
<meta name="author" content="Christian Gimenez">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style>
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<script>
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="index.html"> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="content" class="container">
<div class="row"><div class="col-md-3 col-md-push-9"><nav id="table-of-contents">
<div id="text-table-of-contents" class="bs-docs-sidebar">
<ul class="nav">
<li><a href="#sec-1">1. Introduction</a></li>
<li><a href="#sec-2">2. Symbol grouping</a></li>
<li><a href="#sec-3">3. Blocking state</a></li>
<li><a href="#sec-4">4. Diagram modularity</a></li>
<li><a href="#sec-5">5. State-transition function design</a>
<ul class="nav">
<li><a href="#sec-5-1">5.1. String parsing</a></li>
<li><a href="#sec-5-2">5.2. UCHAR parsing</a></li>
</ul>
</li>
</ul>
</div>
</nav>
</div><div class="col-md-9 col-md-pull-3"><h1 class="title">Finite Automata Design</h1>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
The first step of the parser is to recognize tokens from the input. Each token is a string with a determined meaning. These token are composed of specific characters and they can be recognized by an automata.
</p>

<p>
In this particular case, some tokens are defined in the grammar proposed by the <a href="https://www.w3.org/TR/turtle/">RDF 1.1 Turtle specification</a>. Some of the "production terminals" EBNF rules are considered as valid tokens whereas the rest are used to form a charater set for more complex tokens. For instance, the <code>HEX</code> rule is considered as a character set used by other rules to form complex tokens and <code>IRIREF</code> is a valid token that identifies an IRI reference.
</p>

<p>
The automata is defined mathematically as <img src="ltxpng/design_f8597050920d939368c950b3a283614c2f15cc60.png" class="img-responsive" alt="$(\Sigma, S, s_0, \delta, F)$"> where:
</p>

<ul class="org-ul">
<li>&Sigma; is the unicode set of symbols.
</li>
<li>S is the set of possible states.
</li>
<li>s_0 is the starting state represented as the <code>start</code> state in the diagram.
</li>
<li>&delta; is the state-transition function <img src="ltxpng/design_a3acde379e2ec5248e9bbcf350b3a13329f04c08.png" class="img-responsive" alt="$\delta : S \times \Sigma \to S$">.
</li>
<li>F is a set with the final (or acceptance) states represented as green ellipses in the diagram.
</li>
</ul>

<p>
The automata is a finite deterministic one. This means that the domain of the &delta; function is defined with all possible symbols for each state. Specifically, for each state in the aformentioned automata there is a tuple <img src="ltxpng/design_540d73644da2beab84227d68e7704ca371ce3f31.png" class="img-responsive" alt="$(s_1, u)$"> for all Unicode symbol <img src="ltxpng/design_f75c314ef8dc818d5f77a59f7b23e7dc02dfafe3.png" class="img-responsive" alt="$u$">. Considering the amount of unicode symbols, creating a directed graph diagram that represents all the state-transitions would be very difficult. Therefore, a convention should be created to shorten the diagram for making it simple and readable.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Symbol grouping</h2>
<div class="outline-text-2" id="text-2">
<p>
In order to reduce the amount of edges, the symbols would be grouped into sets. For example, the <code>HEX</code> charset is composed by the digits 0 to 9 and letters "a" to "f" in lower and uppercase. This is represented in EBNF as <code>HEX ::= ([0-9]|[a-f]|[A-F])</code>. 
</p>

<p>
The diagram will use these charsets instead of a symbol per edge. It must be noted that a non-deterministic automata could be created if a state has non-disjoint charsets as edges. Thus, the following rule is impossed: the same char should not appear in two or more charsets used as output edges from the same state. As oa contraexample: The charset <code>LETTER</code> and <code>HEX</code> should not appear as output edges from the same state because the letter "a" is on both charsets.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Blocking state</h2>
<div class="outline-text-2" id="text-3">
<p>
A blocking state is implicit in the diagram. This "blocking" state is reached when a char is not represented by an edge. For example, suppose that the automata reads the char "a", but on the diagram there's no edge with that letter for the current state. This means that the automata changes from the current state to the blocking state. Also, this blocking state changes into the same blocking state for any symbol readed (i.e. <img src="ltxpng/design_58dce11e5ba18474337c77ef744533349251d9c7.png" class="img-responsive" alt="$\delta(B, u) = B \;\; \forall u \in \Sigma \, \land \, B \notin F$"> where <img src="ltxpng/design_85b9c5bc6feaef7456f192c2199795eb3bd06187.png" class="img-responsive" alt="$B$"> is the blocking state).
</p>

<p>
In other words, for every state that there is no output edge for a certain character <code>u</code>, then this edge exists implicitly and leads to a state that won't accept any further input. This will reduce the amount of edges and the repetition of the same blocking state pattern over and over.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Diagram modularity</h2>
<div class="outline-text-2" id="text-4">
<p>
The diagram would be divided into subdiagrams. This is depicted in two ways:
</p>

<ul class="org-ul">
<li>A state connected to another with a dashed arrow and a label with "See&#x2026;"
</li>
<li>A state connected to an a "See&#x2026;" label with a dashed arrow.
</li>
</ul>

<p>
The first modularity represenation means that the state can transition through a subautomata and ends in the other state. The diagram indicated in the "See&#x2026;" label contains the first and last state and how the substring is parsed by the subautomata. The second one means that after this state, the subautomata indicated by the "See&#x2026;" label si to be used to continue the parsing process.
</p>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> State-transition function design</h2>
<div class="outline-text-2" id="text-5">
<p>
The main overview of the automata is as follows.
</p>


<figure>
<p><img src="automata.png" class="img-responsive" alt="automata.png">
</p>
</figure>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> String parsing</h3>
<div class="outline-text-3" id="text-5-1">

<figure>
<p><img src="string.png" class="img-responsive" alt="string.png">
</p>
</figure>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> UCHAR parsing</h3>
<div class="outline-text-3" id="text-5-2">

<figure>
<p><img src="uchars.png" class="img-responsive" alt="uchars.png">
</p>
</figure>
</div>
</div>
</div>
</div></div></div>
<footer id="postamble" class="">
<div><p class="date">Date: 04 Aug 2020</p>
<p class="author">Author: Christian Gimenez</p>
<p class="date">Created: 2020-08-04 Tue 14:34</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="http://orgmode.org">Org-mode</a> 9.3.6)</p>
</div>
</footer>
</body>
</html>
